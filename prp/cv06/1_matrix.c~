#include <stdio.h>
#include <stdlib.h>

double *newMatrix(int row, int col)
{
	return (double *)malloc(row*col*sizeof(double));
}

void delMatrix(double *mat)
{
	free(mat);
}

double getValue(const double *mat, int col, int r, int c)
{
	//return "mat[r][c]"
	return mat[r*col + c];
}

void setValue(double *mat, int col, int r, int c, double val)
{
	// "mat[r][c] = val"
	mat[r*col + c] = val;  // arr[i] = *(arr + i)
}

double *readMatrix(int *row, int *col)
{
	// *row
	// *col
	// mat[i][j] = (i,j)
	
	// return mat
	double *mat;
	double v;
	
	scanf("%d %d", row, col);
	
	mat = newMatrix(*row, *col);
	for (int i = 0; i < *row; i++)
	{
		for (int j = 0; j < *col; j++)
		{
			scanf("%lf", &v); // &v je ekvivalentni k mat + i * *col + j
			// coz je ekvivalentni k &mat[i* *col + j]
			
		}
	}
	
	return v;
}

void printMatrix(const double *mat, int row, int col)
{
	for (int i = 0; i < row; i++)
	{
		for (int j = 0; j < col; j++)
		{
			printf(" %lf", mat[j*col+i]);
		}
		printf("\n");
	}
}

double *transpose(const double *mat, int row, int col)
{
	double *mat_t;
	
	mat_t = newMatrix(col, row);
	
	for (int i = 0; i < row; i++)
	{
		for (int j = 0; j < col; j++)
		{
			setValue(mat_t, row, j, i, getValue(mat, col, i, j));
		}
	}
	
	return mat_t;
}



int main()
{
	double **matarr;
	double *mat, *mat_t;
	int row, col;
	
	matarr[0] = readMatrix(&col, &row);
	matarr[1] = readMatrix(&col, &row);
	
	mat = readMatrix(&row, &col);
	printMatrix(mat, row, col);
	
	mat_t = transpose(mat, row, col);
	printf("------\n");
	printMatrix(mat_t, col, row);
	
	delMatrix(mat);
	delMatrix(mat_t);
	
	//pole matic - double **matarr;
	// matarr[0] je typu double *
	// tedy matarr[0][1] je druha polozka prvni matice
	
	//scanf("%d %d", &row, &col);
	
	//double *mat; //pointer na pole, alokuje se na halde, klasicka double mat[row][col] se alokuje na stacku
	//mat = (double *)malloc(row*col*sizeof(double));
	
	//for (int i = 0; i < row; i++)
	//{
		//for (int j = 0; j < col; j++)
		//{
			//scanf("%lf", &mat[i*col+j]);	//je ulozeno linearne (jednorozmerne), index(i,j) = i * col + j
		//}
	//}
	
	//for (int i = 0; i < col; i++)
	//{
		//for (int j = 0; j < row; j++)
		//{
			//printf(" %lf", mat[j*col+i]);
		//}
		//printf("\n");
	//}

	return 0;
}
